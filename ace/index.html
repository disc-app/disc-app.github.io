<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>The Dutch National Flag Problem | DiscApp.com</title>
  <meta name="author" content="Adnan Aziz">
  
  <meta name="description" content="Use technology to make the world discoverable">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta property="og:title" content="The Dutch National Flag Problem"/>
  <meta property="og:site_name" content="DiscApp.com"/>

  
    <meta property="og:image" content="undefined"/>
  

  
  
    <link href="/favicon.ico" rel="icon">
  
  
  <link rel="stylesheet" href="/css/bootstrap.min.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/font-awesome.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/responsive.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/highlight.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/google-fonts.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

  <script src="/js/jquery-2.0.3.min.js"></script>

  <!-- analytics -->
  



</head>

 <body>  
  <nav id="main-nav" class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="container">
      <button type="button" class="navbar-header navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
		<span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
	  <a class="navbar-brand" href="/">DiscApp.com</a>
      <div class="collapse navbar-collapse nav-menu">
		<ul class="nav navbar-nav">
		  
		  <li>
			<a href="/archives" title="All the articles.">
			  <i class="fa fa-archive"></i>Archives
			</a>
		  </li>
		  
		</ul>
      </div>
    </div> <!-- container -->
</nav>
<div class="clearfix"></div>

  <div class="container">
  	<div class="content">
    	 


	
		<div class="page-header">		
			<h1> The Dutch National Flag Problem</h1>
		</div>		
	



<div class="row post">
	<!-- cols -->
	
	<div id="top_meta"></div>
	<div class="col-md-9">
	

	<!-- content -->
	<div class="mypage">		
	  		

	  <p></p><h4>Problem</h4><br>Write a program that takes an array A and an index i into A, and rearranges the elements such that all elements less than A[i] (the <em>pivot</em>) appear first, followed by elements equal to the pivot, followed by elements greater than the pivot.<p></p>
<p>As an example, assuming that black precedes white and white precedes gray, Figure 2.1(b) is a valid partitioning for Figure 2.1(a). If gray precedes black and black precedes white, Figure 2.1(c) is a valid partitioning for Figure 2.1(a).     </p>
<p><img src="/images/dnf.png"></p>
<div id="hint1Text" style="display:none">It’s possible to solve it in O(n) time and O(1) space.</div><br><div id="JAVAfilename" style="display:none">DutchNationalFlag.java</div><br><div id="CPPfilename" style="display:none">Dutch_national_flag.cc</div>

<!-- everything below here is common to all problems. 

we use hint1Text and *filename divs to provide the information needed to the code below. 

hint1Text's role is simple, used to provide text shown on hint

the filename is more subtle, we pull the source file from github and extract out the code meant for displaying
in the editor and also the test code. some challenges include updating the imports, changing the class name.

when we get the result back from compilebox server, we need to massage it (primarily wrt line numbers) to
make it something the user can use.

TODO: how to work with performance tests.

-->
<div id="hint-1" style="display:none"><br><h5>Hint</h5><br><div id="hint-1-body"></div><br></div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.3/ace.js" type="text/javascript" charset="utf-8"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.5/handlebars.min.js" type="text/javascript" charset="utf-8"></script>
<style type="text/css" media="screen">
  #editor { 
    position: relative;
    height: 360px;
    top: 10px;
    right: 10px;
    bottom: 10px;
    left: 0px;
  }
</style>

<button type="button" id="show-editor-btn" value="submit" class="btn btn-success btn-xs">Show editor</button>
<span class="dropdown">
  <button class="btn btn-xs dropdown-toggle" type="button" id="language-select" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
    Language
    <span class="caret"></span>
  </button>
  <ul class="dropdown-menu" aria-labelledby="language-select">
    <li><a>C++</a></li>
    <li><a>Java</a></li>
  </ul>
</span>
<button type="button" id="sendto-compilebox-btn" value="submit" class="btn btn-warning btn-xs">Run</button>
<button type="button" value="submit" id="custom-args-btn" class="btn btn-xs btn-primary">Custom args</button> 
<button type="button" id="reset-btn" value="submit" class="btn btn-danger btn-xs">Reset</button>
&nbsp;
<button type="button" value="submit" id="hint-btn" class="btn btn-xs btn-default" aria-label="Left Align">Hint</button>
<a href="http://talk.elementsofprogramminginterviews.com" target="_blank" rel="external">
<button type="button" id="change-column" value="submit" class="btn btn-info btn-xs" aria-label="Left Align">Discussion</button></a>


<script>
var SHOW_EDITOR = "Show editor";
var HIDE_EDITOR = "Hide editor";
$(".dropdown-menu li a").click(function(){
  var language = $(this).text();
  console.log("Selected Language: " + language);
  if (language == "Java") {
    LANGUAGE = 'JAVA'
    getFunction('JAVA');
  } else if (language == 'C++') {
    LANGUAGE = 'CPP'
    getFunction('CPP');
  }
  $("#editor").show();
  $("#show-editor-btn").text(HIDE_EDITOR);

});
</script>


<div id="editor" style="display:none"></div>


<script>
    var states = {};
    states.visibleStdout = false;
    states.visibleHint = false;
    states.visibleCustomArgs = false;
    states.visibleEditor = false;

    var clickHandler = function(btnId, container, state, callback) {
        $(btnId).on("click", function() {
            console.log("in click handler");
            if (states[state] === false) {
                $(container).show();
                states[state] = true;
            } else {
                $(container).hide();
                states[state] = false;
            }
            if (callback !== undefined) {
                console.log("calling callback");
                callback();
            }
        });
    };

    $("#hint-1-body").append($("#hint1Text").text().trim());

    var toggleShowEditorText = function() {
        var buttonText = $("#show-editor-btn").text();
        console.log(buttonText);
        if (buttonText == SHOW_EDITOR) {
            $("#show-editor-btn").text(HIDE_EDITOR);
        } else if (buttonText == HIDE_EDITOR) {
            $("#show-editor-btn").text(SHOW_EDITOR);
        } else {
            console.log("invalid button text");
        }
    };

    clickHandler("#hint-btn",  "#hint-1", "visibleHint");
    clickHandler("#reset-btn",  "#compilebox-output-container", "visibleStdout");
    clickHandler("#custom-args-btn",  "#custom-args-content", "visibleCustomArgs");
    clickHandler("#show-editor-btn",  "#editor", "visibleEditor", toggleShowEditorText);

</script>

<!-- use this Handlebars template to avoid html code duplication -->
<!-- need raw to keep markdown from trying to interpret our double curly braces -->

<script id="compilebox-feedback-template" type="text/x-handlebars-template">
  <div class="panel panel-default" id="compilebox-{{id}}-container" style="display:none">
    <div class="panel-heading">
      <h5 class="panel-title">{{title}}</h5>
    </div>
    <div class="panel-body">
      <pre><code><div id="compilebox-{{id}}">{{description}}</div></code></pre>
    </div>
  </div>
</script>

<div id="compilebox-running-template"></div><br><div id="compilebox-fail-template"></div><br><div id="compilebox-errors-template"></div><br><div id="compilebox-output-template"></div>

<script>

var runningContext = {description: "Your program has been sent to the judge, please wait a few seconds...", id: "running", title:"Running"};
var failContext = {description: "Compile errors go here", id: "fail", title:"Compile errors"};
var errorsContext = {description: "Runtime errors go here", id: "errors", title:"Errors"};
var outputContext = {description: "Stdout goes here.", id: "output", title:"stdout"};

var source   = $("#compilebox-feedback-template").html();
var template = Handlebars.compile(source);

$("#compilebox-running-template").append(template(runningContext));
$("#compilebox-fail-template").append(template(failContext));
$("#compilebox-errors-template").append(template(errorsContext));
$("#compilebox-output-template").append(template(outputContext));

</script>

<div class="panel panel-default" style="display:none" id="custom-args-content"><br>  <div class="panel-heading"><br>    <h3 class="panel-title">Custom arguments</h3><br>  </div><br>  <div class="panel-body"><br>    <textarea rows="2" id="custom-test" style="width:100%;"></textarea><br>  </div><br></div>


<script>
    var editor = ace.edit("editor");
    editor.setTheme("ace/theme/github");
    editor.getSession().setMode("ace/mode/java");
    editor.setOptions({fontSize: "10pt"});
</script>

<script>
// globals 
var LANGUAGE = undefined;
var JAVA = 'JAVA';
var CPP = 'CPP';
var LANGS = {
    CPP: 7,
    JAVA: 8
};


var firstIncludeLine = undefined;
var lastIncludeLine = undefined;
var testCase = undefined;

var LANG_BASE_URLS = {};
LANG_BASE_URLS[JAVA] = "https://raw.githubusercontent.com/epibook/epibook.github.io/master/solutions/java/src/main/java/com/epi/";
// LANG_BASE_URLS[CPP] = "https://raw.githubusercontent.com/epibook/epibook.github.io/master/solutions/cpp/";
LANG_BASE_URLS[CPP] = "https://raw.githubusercontent.com/adnanaziz/publicadnan/master/tmp/";

var STD_JAVA_IMPORTS = "import java.util.*;\n"
                    + "import java.math.*;\n\n";

var LANG_PROLOGUE = {};
var LANG_EPILOGUE = {};

LANG_PROLOGUE[JAVA]  = STD_JAVA_IMPORTS + "class Solution {\n\n";
LANG_EPILOGUE[JAVA] = "\n}\n";

LANG_PROLOGUE[CPP] = "\n";
LANG_EPILOGUE[CPP] = "\n";

var COMPILE_FAILED_MSG = "Compilation Failed"; //TODO: check this

var print = function() {
    var result = "";
    for (var i = 0; i < arguments.length; i++) {
        result += arguments[i];
    }
};
</script>

<script>
var extractJudgeInclude = function(source) {
  var lines = source.split("\n");
  var includeLines = [];
  var testCaseLines = [];
  var inInclude = false;
  for (var i = 0; i < lines.length; i++) {
    if (lines[i].match(/@judge-exclude-display/)) {
       inInclude = false;
       lastIncludeLine = i;
    }
    if (inInclude) {
      includeLines.push(lines[i]);
    }
    if (lines[i].match(/@judge-include-display/)) {
      inInclude = true;
      firstIncludeLine = (firstIncludeLine != undefined) ? firstIncludeLine : i;
    } 
  }

  var compilableLine = function(line) {
    var result = line;
    if (line.match(/^\s*public class/)) {
         var idx = line.indexOf("public");
         result = line.substring(idx + "public".length);
     }
     if (line.match(/^\s*package com.epi/)) {
         result = "// " + line;
     }
     if (line.match(/^\s*import /)) {
         result = "// " + line;
     }
     return result;
  };


  console.log("firstIncludeLine = " + firstIncludeLine);
  console.log("lastIncludeLine = " + lastIncludeLine);
  for (var i = 0; i < lines.length; i++) {
    if (i < firstIncludeLine) { 
      testCaseLines.push(compilableLine(lines[i]));
    } else if (i == firstIncludeLine) { 
      testCaseLines.push("// @judge-fill");
    } else if (i > lastIncludeLine) {
      testCaseLines.push(compilableLine(lines[i]));
    }
  }
  testCase = testCaseLines.join("\n");
  console.log("test case = " + testCase);

  return includeLines.join("\n");
};

var processSource = function(language, source) {
  var PROLOGUE = LANG_PROLOGUE[language];
  var EPILOGUE = LANG_EPILOGUE[language];
  var editorText = extractJudgeInclude(source);
  editor.setValue(PROLOGUE + editorText + EPILOGUE);
};
</script>

<script>
var getFunction = function(language) {
  var BASE_URL = LANG_BASE_URLS[language]
  var processSourceLanguage = processSource.bind(undefined, language);
  var url = BASE_URL + $('#' + language + 'filename').text().trim();
  $.ajax({
    url : url,
    success : processSourceLanguage
  });
};
</script>


<script>
//TODO(AA): only works for java right now
var postProcessEditorText = function(language, text) {
  var result;
  if (language == JAVA) {
    var lines = text.split("\n");
    // brittle, relies on the preamble having two imports...
    var OFFSET = 5;
    result = lines.slice(OFFSET, -2).join("\n");
  } else if (language == CPP) {
    result = text;
  }
  return result;
}


var postProcessErrorsLanguage = {};

var postProcessErrorsJava = function(errors, begin) {
  var lines = errors.split("\n");
  var result = "";
  for (var i = 0; i < lines.length; i++) {
    if (lines[i].match(/^Note:/)) {
        continue;
    }
    var tmp = lines[i].replace("/usercode/file.java:", "") + "\n";
    if (tmp.match(/^\d+:/)) {
        var parts = tmp.split(":");
        parts[0] = "Line " + (parseInt(parts[0]) - (begin));
        parts = parts.join(":");
        result += parts;
    } else {
        result += tmp;
    }
  }
  return result;
};

//TODO(AA): lots of dup of above
var postProcessErrorsCPP =  function(errors, begin) {
  var lines = errors.split("\n");
  var result = "";
  for (var i = 0; i < lines.length; i++) {
    var tmp = lines[i].replace("/usercode/file.cpp:", "") + "\n";
    if (tmp.match(/^\d+:/)) {
        var parts = tmp.split(":");
        var OFFSET_CPP = 3;
        parts[0] = "Line " + (parseInt(parts[0]) - (begin) - OFFSET_CPP);
        parts = parts.join(":");
        result += parts;
    } else {
        result += tmp;
    }
  }
  return result;
};

postProcessErrorsLanguage[JAVA] = postProcessErrorsJava;
postProcessErrorsLanguage[CPP] = postProcessErrorsCPP;

var postProcessErrors = function(language, errors, begin) {
  if (errors === undefined) {
      return "";
  }
  return postProcessErrorsLanguage[language](errors, begin);
}
var compileStartUIInitialize = function() {
  $("#compilebox-running-container").show();
  $("#compilebox-output-container").hide();
  $("#compilebox-errors-container").hide();
  $("#compilebox-fail-container").hide();
  // TODO(AA):
  // refactor to use wildcards to simplify code:
  // $("[id^=compilebox-]").hide();
};

// type is 'errors', 'fail' or 'output'
var UIUpdateOnResult = function(displayText, type) {
 $('#compilebox-' + type ).text(displayText).html();
 $('#compilebox-' + type + '-container').show();
};

var generateCodeToRun = function(language, massagedEditorText) {
    if (language == JAVA) {
        return "import java.util.*;\nimport java.math.*;\n\n" + testCase.replace("// @judge-fill", 
                    "\n // submitted solution:\n" 
                        + massagedEditorText 
                        + "\n// end submitted solution\n"); 
    } else if (language == CPP) {
        return "//CPP header \n" + testCase.replace("// @judge-fill", 
                                    "\n // submitted solution:\n" 
                                        + massagedEditorText 
                                        + "\n// end submitted solution\n"); 
    }
};

var compile = function() {
  compileStartUIInitialize();
  var editorText = editor.getValue();
  var massagedEditorText = postProcessEditorText(LANGUAGE, editorText);

  // strange, refactoring this line leads to compile errors...
  var codeToRun = generateCodeToRun(LANGUAGE, massagedEditorText);
  console.log("codeToRun = " + codeToRun);

  var compileboxArgs = {
    "language": LANGS[LANGUAGE], // e.g., Java is 8
    "code": codeToRun,
    "editorText": editorText,
    "problemname": "TODO problemname",
    "stdin": $("#custom-test").text()
  };

  var compileboxServer = "http://judge.elementsofprogramminginterviews.com:8080"
  $.ajax({
    type: 'POST', // http method
    url: compileboxServer + "/api/submitprogram/compile",
    data: compileboxArgs,
    success: function(serverResp) { // on ajax success
      $("#compilebox-running-container").hide();
      var massagedErrors = postProcessErrors(LANGUAGE, serverResp.errors, firstIncludeLine).trim();
      var massagedOutput = serverResp.output.trim();
      if (massagedOutput.length > 0 && (massagedOutput != COMPILE_FAILED_MSG)) {
          console.log("serverResp = " + JSON.stringify(serverResp));
          UIUpdateOnResult(serverResp.output, 'output');
      } else if (massagedOutput == COMPILE_FAILED_MSG) {
          console.log("serverResp = " + JSON.stringify(serverResp));
          UIUpdateOnResult(massagedErrors, 'fail');
      } else if (massagedErrors.length > 0 && massagedOutput.trim() != COMPILE_FAILED_MSG) {
          console.log("serverResp = " + JSON.stringify(serverResp));
          UIUpdateOnResult(massagedErrors, 'errors');
      }
      $('#compilebox-time').html(serverResp.time);
    },
    error: function(serverResp) { // on ajax failure
        console.log('5xx http status code or unexpected response content');
      }
    });
};
</script>

<script>
$(document).ready(function() {
  $("#sendto-compilebox-btn").click(compile);
});
</script>
	  
	</div>

	<div>
  	<center>
	<div class="pagination">
<ul class="pagination">
	 
		
          <li class="prev disabled"><a><i class="fa fa-arrow-circle-o-left"></i>Prev</a></li>
        

        <li><a href="/archives"><i class="fa fa-archive"></i>Archive</a></li>

		
		   <li class="next"><a href="/test/" class="alignright next">Next<i class="fa fa-arrow-circle-o-right"></i></a></li>         
        
	
</ul>
</div>

    </center>
	</div>
	
	<!-- comment -->
	
<section id="comment">
  <h2 class="title">Comments</h2>

  
</section>

	</div> <!-- col-md-9/col-md-12 -->
		
	
	<div id="side_meta">
		<div class="col-md-3" id="post_meta"> 

	<!-- date -->
	
	<div class="meta-widget">
	<i class="fa fa-clock-o"></i>
	2016-02-26 
	</div>
	

	<!-- categories -->
    

	<!-- tags -->
		

	<!-- toc -->
	<div class="meta-widget">
	
	</div>
	
    <hr>
	
</div><!-- col-md-3 -->

	</div>
		

</div><!-- row -->



	</div>
  </div>
  <div class="container-narrow">
  <footer> <p>
  &copy; 2016 Adnan Aziz
  
      with help from <a href="http://hexo.io/" target="_blank">Hexo</a> and <a href="http://getbootstrap.com/" target="_blank">Twitter Bootstrap</a>. Theme by <a href="http://github.com/wzpan/hexo-theme-freemind/">Freemind</a>.    
</p> </footer>
</div> <!-- container-narrow -->
  


  
<a id="gotop" href="#">   
  <span>▲</span> 
</a>

<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script src="/js/main.js"></script>
<script src="/js/search.js"></script> 


<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>



</body>
   </html>
